.TH DOQBAL 3SU SU
.SH NAME
.B doqbal \-
quantile balance a data vector
.SH SYNOPSIS
.nf
void doqbal(dataptr, qclip, nfloat)
float *dataptr;
float qclip;
int nfloat;
.SH DESCRIPTION
.I Doqbal
scales ("balances") a data vector by the qclip-th quantile of the
absolute values on the data vector.  In the special case of qclip=1.0,
this reduces to balancing by the maximum magnitude of the data vector
and the code is optimized for this common choice.
(A quantile of a data set is a percentile divided by 100 and lies 
between 0 and 1; for example, the .95 quantile is the 95th percentile.)
.P
In the usual SU application, the data vector is created by concatenating
the data portions of a sequence of SEG-Y traces.
In this case, the clip value is computed using the entire original data set.
If, instead, trace by trace quantile balancing is desired, then doqbal can be
called in a loop or (usually more convenient) the SEG-Y traces can be
filtered through sugain (1).
.P
This subroutine may be evoked in combination with other gain, scale or
balance parameters by calling it from gain(3SU).
.SH PARAMETERS
.TP 8
.I dataptr
Pointer to the data vector.
.TP
.I qclip
The quantile of the data magnitudes to balance by (the maximum data
magnitude if equal to 1.0).
.TP
.I nfloat
The total data count (the number of samples per
trace times the number of traces in the original SEG-Y data set).
.SH SEE ALSO
sugain(1) suagc(1) quant(3SU) gain(3SU) dotpow(3SU) doepow(3SU)
dogpow(3SU) doagc(3SU)
dotrap(3SU) doclip(3SU) doqclip(3SU) dopbal(3SU) doscale(3SU)
.SH AUTHORS
Jon, Shuki, Jack
.SH SOURCE
su/lib/gainpkge.c
.SH REVISION LEVEL
1.8
